{# @var craft \craft\web\twig\variables\CraftVariable #}
<div class="my-8 w-full">
    <div class="w-5/6 P-4 mx-auto">
        {# -- Episode number and date -- #}
        <div>
            <div class="inline-block text-devmode-pink bg-grey-lightest font-mono text-xs text-right uppercase p-8">
                {{ "Episode " ~ episode.episodeNumber }} &middot; {{ episode.postDate |date('Y.m.d') }}
            </div>
        </div>
        {# -- Episode title -- #}
        <div>
            <div class="inline-block text-devmode-pink bg-grey-lightest font-mono italic text-bold text-5xl p-8">
                <a href="{{ episode.url }}" class="title-link" @mouseover="prerenderLink">
                    <strong>
                        {{ episode.title |typogrify }}
                    </strong>
                </a>
            </div>
        </div>
        {# -- Episode summary -- #}
        <div>
            <div class="text-devmode-pink bg-grey-lightest font-sans text-xl p-8">
                {{ episode.episodeSummary |typogrify }}
            </div>
        </div>
        {# -- Episode tags -- #}
        <div>
            <div class="inline-block bg-grey-lightest p-8">
                {% for tag in episode.episodeTags.all() %}
                    <span class="font-mono italic font-bold text-xs bg-devmode-yellow text-devmode-pink px-2 py-1 m-1">
                        #{{ tag.title }}
                    </span>
                {% endfor %}
            </div>
        </div>
        {# -- Reference links -- #}
        {% if  episode.episodeReferenceLinks |length %}
            <div>
                <div class="inline-block text-devmode-pink bg-grey-lightest font-sans text-xl p-8">
                    <span class="uppercase">Mentioned in the show:</span>
                
                    {% for link in episode.episodeReferenceLinks %}
                        <li>
                            <a href="{{ link.linkUrl }}" class="title-link" title="{{ link.linkName }}" rel="nofollow,noopener">{{ link.linkName }}</a>
                        </li>
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    </div>
</div>

<div class="py-8 mb-8 w-full">
    <div class="w-full P-4 mx-auto">
{# -- Audio player -- #}
        {% set transAudioUrl = craft.transcoder.getAudioUrl(episode.episodeMedia.one(), {
            "audioBitRate": "64k",
            "audioSampleRate": 22050,
            "audioChannels": 1
        }) %}
        {% if transAudioUrl |length %}
            <div class="py-2">
                <audio class="w-full" controls>
                    <source src="{{ transAudioUrl }}" type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>
            </div>
        {% endif %}
    </div>
</div>
