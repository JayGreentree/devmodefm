{% extends "_layouts/layout.twig" %}

{% block headLinks %}
    <link rel="amphtml" href="{{ siteUrl('/calendar/amp') }}">
{% endblock headLinks %}

{% block content %}
    {% include "_partials/_meta-schema-radio-series.twig" with {
        "showInfo": showInfo,
    } only %}
    <section>
        <div class="py-8 w-full">
            <div class="w-full max-w-4xl mx-auto">
                {# -- Intro -- #}
                <div>
                    <div class="inline-block text-devmode-pink bg-gray-100 font-mono text-xs text-left p-8">
                        {{ "Check out" |typogrify }}
                    </div>
                </div>
                {# -- Show title -- #}
                <div>
                    <div class="inline-block bg-gray-100 p-8">
                        <strong>
                            <h1 class="text-devmode-pink font-mono italic font-bold text-4xl sm:text-5xl">
                                {{ "What's coming up!" | typogrify }}
                            </h1>
                        </strong>
                    </div>
                </div>

                {# -- Show summary -- #}
                <div>
                    <div class="inline-block text-devmode-pink bg-gray-100 font-sans text-xl p-8 leading-normal">
                        {{ "Pulled straight from our Trello cards, check out the upcoming shows we have scheduled, or subscribe to our .ics calendar feed with the link below, or view the public Google Calendar:" |typogrify }}
                        <br />
                        <br />
                        <div class="inline-block text-devmode-pink bg-gray-100 font-sans text-2xl p-8">
                            <i class="icon-info-circled align-middle"></i>
                            <ul class="list-reset inline">
                                <li class="inline">
                                    <a href="{{ craft.site.calendarFeedUrl() }}" class="tags-link align-middle whitespace-no-wrap" title="Show Calendar feed" target="_blank" rel="nofollow noopener">{{ "Show Calendar .ics feed" | typogrify }}</a>
                                    <span> </span>
                                </li>
                                <li class="inline">
                                    <a href="https://calendar.google.com/calendar/embed?src=uiv8dsrg58ii87gu16rcji845qfcpgrv%40import.calendar.google.com&ctz=America%2FNew_York" class="tags-link align-middle whitespace-no-wrap" title="Show Calendar feed" target="_blank" rel="nofollow noopener">{{ "Public Google Calendar" | typogrify }}</a>
                                    <span> </span>
                                </li>
                            </ul>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </section>

{% endblock %}

{% block subcontent %}
    <section>
        <div class="bg-devmode-aqua">
            <div class="pt-8">
                <div class="w-full bg-transparent">
                    <div class="pt-8 mb-8">
                        <h3 class="text-white text-center">
                            Upcoming shows
                        </h3>
                    </div>
                </div>
            </div>
            {% set cal = parseIcs(craft.site.calendarFeedUrl(), {
                "defaultTimeZone": "America/New_York",
            }) %}
            {% if cal %}
                {% for event in cal.eventsFromRange(now | date | atom) %}
                    <div class="container mx-auto py-8">
                        <div class="flex flex-wrap {% if loop.last %} pb-8{% endif %}">
                            {% include "calendar/_partials/_display_event_excerpt.twig" with {
                                "event": event,
                                "showInfo": showInfo,
                            } only %}
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
        </div>
    </section>
{% endblock %}

{# -- Any JavaScript that should be included before </body> -- #}
{% block bodyJs %}
{% endblock bodyJs %}
